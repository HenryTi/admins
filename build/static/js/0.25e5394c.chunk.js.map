{"version":3,"sources":["../../tonva-tools/dist/entry/login.js","../../tonva-tools/dist/entry/userApi.js","../../tonva-tools/dist/entry/res/index.js","../../tonva-tools/dist/entry/register.js","../../tonva-tools/dist/entry/regSuccess.js","../../tonva-tools/dist/entry/res/login.js","../../tonva-tools/dist/entry/res/register.js","../../tonva-tools/dist/entry/forget.js"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0_react__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__ui__","n","__WEBPACK_IMPORTED_MODULE_2__register__","__WEBPACK_IMPORTED_MODULE_3__forget__","__WEBPACK_IMPORTED_MODULE_4__userApi__","__WEBPACK_IMPORTED_MODULE_5__res__","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","logo","schema","name","type","required","maxLength","[object Object]","super","arguments","res","uiSchema","items","username","placeholder","label","password","widget","login","className","onSubmit","context","values","form","data","un","pwd","undefined","user","guest","console","log","token","logined","replace","footer","color","style","margin","onClick","push","header","top","props","withBack","maxWidth","padding","display","position","src","height","flex","fontSize","alignSelf","textAlign","onButtonClick","requiredFlag","__WEBPACK_IMPORTED_MODULE_0__net__","__WEBPACK_IMPORTED_MODULE_1__user__","userApi","params","ret","get","nick","icon","post","__WEBPACK_IMPORTED_MODULE_0__login__","d","__WEBPACK_IMPORTED_MODULE_1__register__","__WEBPACK_IMPORTED_MODULE_2__login__","__WEBPACK_IMPORTED_MODULE_3__userApi__","__WEBPACK_IMPORTED_MODULE_4__regSuccess__","__WEBPACK_IMPORTED_MODULE_5__css_va_form_css__","__WEBPACK_IMPORTED_MODULE_6__res__","rePwd","register","msg","country","mobile","email","setValue","clear","show","__WEBPACK_IMPORTED_MODULE_2__userApi__","__WEBPACK_IMPORTED_MODULE_3__css_va_form_css__","retUser","failed","_","a"],"mappings":"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","file":"static/js/0.25e5394c.chunk.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from 'react';\r\nimport { nav, Page, Form, resLang } from '../ui';\r\nimport RegisterView from './register';\r\nimport Forget from './forget';\r\nimport userApi from './userApi';\r\nimport { loginRes } from './res';\r\nconst logo = require('../img/logo.svg');\r\nconst schema = [\r\n    { name: 'username', type: 'string', required: true, maxLength: 100 },\r\n    { name: 'password', type: 'string', required: true, maxLength: 100 },\r\n    { name: 'login', type: 'submit' },\r\n];\r\nexport default class Login extends React.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.res = resLang(loginRes);\r\n        this.uiSchema = {\r\n            items: {\r\n                username: { placeholder: '用户名', label: '用户' },\r\n                password: { widget: 'password', placeholder: '密码', label: '密码' },\r\n                login: { widget: 'button', className: 'btn btn-primary btn-block mt-3', label: '登录' },\r\n            }\r\n        };\r\n        /*\r\n        private schema:FormSchema = new FormSchema({\r\n            fields: [\r\n                {\r\n                    type: 'string',\r\n                    name: 'username',\r\n                    placeholder: '用户名',\r\n                    rules: ['required', 'maxlength:100']\r\n                },\r\n                {\r\n                    type: 'password',\r\n                    name: 'password',\r\n                    placeholder: '密码',\r\n                    rules: ['required', 'maxlength:100']\r\n                },\r\n            ],\r\n            onSumit: this.onLoginSubmit.bind(this),\r\n        });\r\n        */\r\n        this.onSubmit = (name, context) => __awaiter(this, void 0, void 0, function* () {\r\n            let values = context.form.data;\r\n            let un = values['username'];\r\n            let pwd = values['password'];\r\n            if (pwd === undefined) {\r\n                return 'something wrong, pwd is undefined';\r\n            }\r\n            let user = yield userApi.login({\r\n                user: un,\r\n                pwd: pwd,\r\n                guest: nav.guest,\r\n            });\r\n            if (user === undefined)\r\n                return '用户名或密码错！';\r\n            console.log(\"onLoginSubmit: user=%s pwd:%s\", user.name, user.token);\r\n            yield nav.logined(user);\r\n        });\r\n    }\r\n    click() {\r\n        nav.replace(React.createElement(RegisterView, null));\r\n    }\r\n    render() {\r\n        let footer = React.createElement(\"div\", { className: 'text-center' },\r\n            React.createElement(\"button\", { className: \"btn btn-link\", color: \"link\", style: { margin: '0px auto' }, onClick: () => nav.push(React.createElement(RegisterView, null)) }, \"\\u5982\\u679C\\u6CA1\\u6709\\u8D26\\u53F7\\uFF0C\\u8BF7\\u6CE8\\u518C\"));\r\n        let header = false;\r\n        let top = '同花';\r\n        if (this.props.withBack === true) {\r\n            header = '登录';\r\n            top = '登录用户';\r\n        }\r\n        return React.createElement(Page, { header: header, footer: footer },\r\n            React.createElement(\"div\", { style: {\r\n                    maxWidth: '25em',\r\n                    margin: '3em auto',\r\n                    padding: '0 3em',\r\n                } },\r\n                React.createElement(\"div\", { className: 'container', style: { display: 'flex', position: 'relative' } },\r\n                    React.createElement(\"img\", { className: 'App-logo', src: logo, style: { height: '60px', position: 'absolute' } }),\r\n                    React.createElement(\"span\", { style: { flex: 1,\r\n                            fontSize: 'x-large',\r\n                            alignSelf: 'center',\r\n                            textAlign: 'center',\r\n                            margin: '10px',\r\n                        } }, top)),\r\n                React.createElement(\"div\", { style: { height: '20px' } }),\r\n                React.createElement(Form, { schema: schema, uiSchema: this.uiSchema, onButtonClick: this.onSubmit, requiredFlag: false }),\r\n                React.createElement(\"button\", { className: \"btn btn-link btn-block\", onClick: () => nav.push(React.createElement(Forget, null)) }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\")));\r\n    }\r\n}\r\n//# sourceMappingURL=login.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/login.js\n// module id = 359\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { CenterApi } from '../net';\r\nimport { decodeUserToken } from '../user';\r\n//import { nav } from '../ui';\r\nexport class UserApi extends CenterApi {\r\n    login(params) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            //(params as any).device = nav.local.device.get();\r\n            let ret = yield this.get('login', params);\r\n            switch (typeof ret) {\r\n                default: return;\r\n                case 'string': return decodeUserToken(ret);\r\n                case 'object':\r\n                    let token = ret.token;\r\n                    let user = decodeUserToken(token);\r\n                    let { nick, icon } = ret;\r\n                    if (nick)\r\n                        user.nick = nick;\r\n                    if (icon)\r\n                        user.icon = icon;\r\n                    return user;\r\n            }\r\n            // !== undefined) return decodeToken(token);\r\n        });\r\n    }\r\n    register(params) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return yield this.post('register', params);\r\n        });\r\n    }\r\n}\r\nconst userApi = new UserApi('tv/user/', undefined);\r\nexport default userApi;\r\n//# sourceMappingURL=userApi.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/userApi.js\n// module id = 361\n// module chunks = 0","export * from './login';\r\nexport * from './register';\r\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/res/index.js\n// module id = 362\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from 'react';\r\nimport { nav, Page, Form, resLang } from '../ui';\r\nimport LoginView from './login';\r\nimport userApi from './userApi';\r\nimport RegSuccess from './regSuccess';\r\nimport '../css/va-form.css';\r\nimport { registerRes } from './res';\r\nconst logo = require('../img/logo.svg');\r\nconst schema = [\r\n    { name: 'user', type: 'string', required: true, maxLength: 100 },\r\n    { name: 'pwd', type: 'string', required: true, maxLength: 100 },\r\n    { name: 'rePwd', type: 'string', required: true, maxLength: 100 },\r\n    { name: 'register', type: 'submit' },\r\n];\r\nexport default class Register extends React.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.res = resLang(registerRes);\r\n        this.uiSchema = {\r\n            items: {\r\n                user: { placeholder: '用户名', label: '用户名' },\r\n                pwd: { widget: 'password', placeholder: '密码', label: '密码' },\r\n                rePwd: { widget: 'password', placeholder: '重复密码', label: '重复密码' },\r\n                register: { widget: 'button', className: 'btn btn-primary btn-block mt-3', label: '注册新用户' },\r\n            }\r\n        };\r\n    }\r\n    /*\r\n    private schema:FormSchema = new FormSchema({\r\n        fields: [\r\n            {\r\n                type: 'string',\r\n                name: 'user',\r\n                placeholder: '用户名',\r\n                rules: ['required', 'maxlength:100']\r\n            },\r\n            {\r\n                type: 'password',\r\n                name: 'pwd',\r\n                placeholder: '密码',\r\n                rules: ['required', 'maxlength:100']\r\n            },\r\n            {\r\n                type: 'password',\r\n                name: 'rePwd',\r\n                placeholder: '重复密码',\r\n                rules: ['required', 'maxlength:100']\r\n            },\r\n        ],\r\n        submitText: '注册新用户',\r\n        onSumit: this.onSubmit.bind(this),\r\n    });\r\n    */\r\n    onSubmit(name, context) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            /*\r\n            let user = await userApi.login({\r\n                user: values['username'],\r\n                pwd: values['password']\r\n            });\r\n            if (user === undefined) {\r\n                //this.failed();\r\n                this.schema.clear();\r\n                this.schema.errors.push('用户名或密码错！');\r\n            } else {\r\n                nav.logined(user);\r\n            }\r\n            return undefined;*/\r\n            //const {user, pwd, rePwd, country, mobile, email} = this.state.values;\r\n            let values = context.form.data;\r\n            let { user, pwd, rePwd, country, mobile, email } = values;\r\n            if (pwd !== rePwd) {\r\n                context.setValue('pwd', '');\r\n                context.setValue('rePwd', '');\r\n                return '密码不对，请重新输入密码！';\r\n                //this.schema.errors.push('密码不对，请重新输入密码！');\r\n                //this.schema.inputs['pwd'].clear();\r\n                //this.schema.inputs['rePwd'].clear();\r\n                //return undefined;\r\n            }\r\n            let ret = yield userApi.register({\r\n                nick: undefined,\r\n                user: user,\r\n                pwd: pwd,\r\n                country: undefined,\r\n                mobile: undefined,\r\n                email: undefined,\r\n            });\r\n            let msg;\r\n            switch (ret) {\r\n                default: throw 'unknown return';\r\n                case 0:\r\n                    nav.clear();\r\n                    nav.show(React.createElement(RegSuccess, { user: user, pwd: pwd }));\r\n                    return;\r\n                case 1:\r\n                    msg = '用户名 ' + user;\r\n                    break;\r\n                case 2:\r\n                    msg = '手机号 +' + country + ' ' + mobile;\r\n                    break;\r\n                case 3:\r\n                    msg = '电子邮件 ' + email;\r\n                    break;\r\n            }\r\n            return msg + ' 已经被注册过了';\r\n            //return undefined;\r\n        });\r\n    }\r\n    click() {\r\n        nav.replace(React.createElement(LoginView, null));\r\n        //nav.replace(<RegisterView />);\r\n    }\r\n    render() {\r\n        return React.createElement(Page, { header: '\\u6CE8\\u518C' },\r\n            React.createElement(\"div\", { style: {\r\n                    maxWidth: '25em',\r\n                    margin: '3em auto',\r\n                    padding: '0 3em',\r\n                } },\r\n                React.createElement(\"div\", { className: 'container', style: { display: 'flex', position: 'relative' } },\r\n                    React.createElement(\"img\", { className: 'App-logo', src: logo, style: { height: '60px', position: 'absolute' } }),\r\n                    React.createElement(\"span\", { style: { flex: 1,\r\n                            fontSize: 'x-large',\r\n                            alignSelf: 'center',\r\n                            textAlign: 'center',\r\n                            margin: '10px',\r\n                        } }, \"\\u540C\\u82B1\")),\r\n                React.createElement(\"div\", { style: { height: '20px' } }),\r\n                React.createElement(Form, { schema: schema, uiSchema: this.uiSchema, onButtonClick: this.onSubmit, requiredFlag: false })));\r\n    }\r\n}\r\n// <ValidForm formSchema={this.schema}  />\r\n//# sourceMappingURL=register.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/register.js\n// module id = 363\n// module chunks = 0","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from 'react';\r\nimport { nav, Page } from '../ui';\r\nimport userApi from './userApi';\r\nimport '../css/va-form.css';\r\nexport default class RegSuccess extends React.Component {\r\n    failed() {\r\n        return;\r\n    }\r\n    login() {\r\n        const { user, pwd } = this.props;\r\n        userApi\r\n            .login({ user: user, pwd: pwd, guest: nav.guest })\r\n            .then((retUser) => __awaiter(this, void 0, void 0, function* () {\r\n            if (retUser === undefined) {\r\n                this.failed();\r\n                return;\r\n            }\r\n            yield nav.logined(retUser);\r\n        }));\r\n    }\r\n    render() {\r\n        const { user, pwd } = this.props;\r\n        return (React.createElement(Page, { header: false },\r\n            React.createElement(\"div\", { className: \"container entry-form\" },\r\n                React.createElement(\"form\", null,\r\n                    React.createElement(\"span\", { className: \"info\" },\r\n                        \"\\u7528\\u6237 \",\r\n                        React.createElement(\"strong\", null,\r\n                            user,\r\n                            \" \"),\r\n                        \" \\u6CE8\\u518C\\u6210\\u529F\\uFF01\"),\r\n                    React.createElement(\"button\", { className: \"btn btn-success btn-block\", onClick: () => this.login() }, \"\\u76F4\\u63A5\\u767B\\u5F55\")))));\r\n    }\r\n}\r\n//# sourceMappingURL=regSuccess.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/regSuccess.js\n// module id = 364\n// module chunks = 0","export const loginRes = {\r\n    _: {\r\n        a: 'd',\r\n    }\r\n};\r\n//# sourceMappingURL=login.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/res/login.js\n// module id = 365\n// module chunks = 0","export const registerRes = {\r\n    _: {\r\n        a: 'd',\r\n    }\r\n};\r\n//# sourceMappingURL=register.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/res/register.js\n// module id = 366\n// module chunks = 0","import * as React from 'react';\r\nimport { Page } from '../ui';\r\nexport default class Forget extends React.Component {\r\n    render() {\r\n        return React.createElement(Page, { header: '\\u5FD8\\u8BB0\\u5BC6\\u7801' }, \"\\u6B63\\u5728\\u8BBE\\u8BA1\\u4E2D...\");\r\n    }\r\n}\r\n//# sourceMappingURL=forget.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../tonva-tools/dist/entry/forget.js\n// module id = 367\n// module chunks = 0"],"sourceRoot":""}